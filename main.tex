\documentclass[bibliography=totoc,index=totoc,letterpaper,numbers=noenddot]{scrbook}

\title{Off on a Tangent}
\subtitle{Meditations on the derivative}
\author{Shishir Agrawal}
\date{Draft of \today}

% Fonts and symbols
\usepackage{newpxtext, bbold, amsmath, amssymb}
\usepackage[euler-digits,euler-hat-accent]{eulervm}
\usepackage[mathscr]{euscript}

\usepackage{setspace}
\setstretch{1.25}
\usepackage[titles]{tocloft}
\cftsetpnumwidth{2em}
\raggedbottom
\recalctypearea

% Pgfplots
\usepackage{pgfplots}
\usepgfplotslibrary{fillbetween}
\pgfplotsset{compat=1.15}
\usepgfplotslibrary{colorbrewer}
\usepgfplotslibrary{external}
\AtBeginEnvironment{tikzcd}{\tikzexternaldisable}
\AtEndEnvironment{tikzcd}{\tikzexternalenable}
\tikzexternalize[prefix=figures/]

% Miscellaneous
\usepackage{makeidx, enumerate, toolbox, tikz-cd, color, cancel, microtype, verbatim, booktabs, collect}
\usepackage[colorlinks=true,hypertexnames=false]{hyperref}
\hypersetup{linkcolor=red}
\makeindex

\usepackage[style=alphabetic]{biblatex}
\addbibresource{references.bib}
\nocite{*}

% Numbering and environments
\usepackage{amsthm}
\usepackage[noabbrev]{cleveref}

\numberwithin{equation}{section}
\setcounter{chapter}{-1}
\setcounter{secnumdepth}{4}

\makeatletter
\let\c@figure\c@equation
\let\c@table\c@equation
\makeatother

% \renewcommand{\thesection}{\thechapter.\Alph{section}}
\renewcommand{\thesubsection}{\thesection.\Alph{subsection}}
\renewcommand{\thefigure}{\thesection.\arabic{figure}}
\renewcommand{\thetable}{\thesection.\arabic{figure}}

\newtheorem{theorem}[equation]{Theorem}
\newtheorem{lemma}[equation]{Lemma}
\newtheorem{proposition}[equation]{Proposition}
\newtheorem{corollary}[equation]{Corollary}

\theoremstyle{definition}
\newtheorem{definition}[equation]{Definition}
\newtheorem{example}[equation]{Example}
\newtheorem{remark}[equation]{Remark}
\newtheorem{exercise}[equation]{Exercise}

\theoremstyle{remark}
\newtheorem*{hint}{Possible hint}
\newtheorem*{caution}{Caution}
\newtheorem*{proofsketch}{Proof sketch}
\newtheorem*{unimportantremark}{Unimportant remark}
\newtheorem*{pedanticremark}{Pedantic remark}

\crefname{exercise}{exercise}{exercises}
\Crefname{exercise}{Exercise}{Exercises}

\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\bbP}{\mathbb{P}}
\renewcommand{\O}{\mathscr{O}}
\newcommand{\id}{\mathrm{id}}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\Der}{Der}
\newcommand{\spn}{\mathrm{sup}}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\adj}{adj}
\DeclareMathOperator{\supp}{supp}
\renewcommand{\phi}{\varphi}

\newcommand{\starred}{\texorpdfstring{$\star$}{*}}

\definecollection{sols}
\makeatletter
\newenvironment{solution}[1]{
	\@nameuse{collect}{sols}{\noindent \textbf{Solution to #1.}}{\par\mbox{}\par}{}{}}{
	\@nameuse{endcollect}
}
\makeatother

\begin{document}
	\maketitle
	
	\include{introduction}
	
	\tableofcontents
	
	\include{preliminaries}
	
	\include{single}
	
	\include{multi}
	
	\include{manifolds}
	
	\include{tangent}
	
	\appendix
	% \include{trigonometry}
	\include{solutions}
	
	\printbibliography
	
	\printindex
	
\end{document}